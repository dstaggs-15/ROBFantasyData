<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fantasy League – Standings & Playoff Bracket</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top left, #0f172a 0, #020617 45%, #000 100%);
            color: #e5e7eb;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            padding: 32px 16px 40px;
        }

        .page { width: 100%; max-width: 1200px; }

        header {
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            gap: 16px;
            align-items: center;
        }

        header h1 { font-size: 1.9rem; letter-spacing: 0.03em; }
        header .subtitle { font-size: 0.95rem; color: #9ca3af; margin-top: 4px; }

        .badge {
            font-size: 0.85rem;
            padding: 6px 14px;
            border-radius: 999px;
            background: linear-gradient(135deg, #22c55e, #38bdf8);
            color: #0f172a;
            font-weight: 600;
            text-transform: uppercase;
            white-space: nowrap;
        }

        .grid {
            display: grid;
            grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
            gap: 20px;
        }

        .card {
            background: linear-gradient(145deg, rgba(15,23,42,0.98), rgba(15,23,42,0.85));
            border-radius: 18px;
            border: 1px solid rgba(148,163,184,0.25);
            box-shadow: 0 18px 40px rgba(15,23,42,0.7);
            padding: 18px 20px 18px;
            backdrop-filter: blur(14px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 10px;
        }

        .card-header h2 { font-size: 1.15rem; letter-spacing: 0.06em; text-transform: uppercase; }

        .pill {
            font-size: 0.75rem;
            padding: 3px 9px;
            border-radius: 999px;
            background: rgba(15,118,110,0.15);
            border: 1px solid rgba(45,212,191,0.4);
            color: #a5f3fc;
            text-transform: uppercase;
        }

        .table-wrapper {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: 4px;
        }

        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }

        thead { background: linear-gradient(to right, rgba(56,189,248,0.12), rgba(129,140,248,0.12)); }

        th, td { padding: 6px 7px; text-align: left; white-space: nowrap; }

        th {
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.09em;
            color: #9ca3af;
            border-bottom: 1px solid rgba(148,163,184,0.35);
        }

        tbody tr:nth-child(odd) { background: rgba(15,23,42,0.9); }
        tbody tr:nth-child(even) { background: rgba(15,23,42,0.75); }
        tbody tr td:first-child { color: #6b7280; font-size: 0.8rem; }

        .team-name { font-weight: 500; color: #e5e7eb; }

        .tag {
            font-size: 0.78rem;
            padding: 2px 7px;
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,0.4);
        }
        .tag.div { border-color: rgba(56,189,248,0.6); color: #7dd3fc; }
        .tag.wild { border-color: rgba(52,211,153,0.7); color: #6ee7b7; }
        .tag.out { border-color: rgba(148,163,184,0.5); color: #9ca3af; }

        .side-stack { display: grid; grid-template-rows: auto auto; gap: 14px; }

        .tiebreak-list { font-size: 0.8rem; color: #d1d5db; margin-left: 14px; margin-top: 6px; line-height: 1.45; }
        .tiebreak-list li { margin-bottom: 4px; }

        details.tiebreaker-details {
            margin-top: 10px;
            padding: 10px 12px;
            border-radius: 12px;
            background: rgba(15,23,42,0.8);
            border: 1px solid rgba(148,163,184,0.5);
        }

        details.tiebreaker-details summary {
            cursor: pointer;
            list-style: none;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.13em;
            color: #e5e7eb;
        }

        details.tiebreaker-details summary::marker,
        details.tiebreaker-details summary::-webkit-details-marker { display: none; }

        .note { font-size: 0.78rem; color: #9ca3af; margin-top: 10px; line-height: 1.4; }

        .h2h-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 6px 0 8px;
        }

        select, button {
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,0.7);
            background: rgba(15,23,42,0.9);
            color: #e5e7eb;
            font-size: 0.82rem;
            padding: 5px 10px;
        }

        button {
            cursor: pointer;
            border-color: #38bdf8;
            background: linear-gradient(135deg, #0ea5e9, #22c55e);
            color: #0f172a;
            font-weight: 600;
        }

        button:hover { filter: brightness(1.05); }

        #h2h-result { font-size: 0.82rem; color: #e5e7eb; min-height: 18px; margin-top: 4px; }
        #h2h-note { font-size: 0.75rem; color: #9ca3af; margin-top: 6px; line-height: 1.35; }

        /* PURE LINES BRACKET (SVG) */
        .bracket-svg-wrapper {
            margin-top: 10px;
            border-radius: 14px;
            border: 1px solid rgba(148,163,184,0.35);
            background: #020617;
            padding: 12px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .bracket-svg {
            width: 100%;
            height: auto;
            min-width: 520px;
            display: block;
        }

        .svg-team {
            fill: #e5e7eb;
            font-size: 13px;
            font-weight: 600;
        }

        .svg-line {
            stroke: #38bdf8;
            stroke-width: 3;
        }

        .semi-line {
            stroke: #22c55e;
            stroke-width: 3;
        }

        .champ-line {
            stroke: #facc15;
            stroke-width: 3;
        }

        .svg-label {
            fill: #9ca3af;
            font-size: 11px;
        }

        .champ-text {
            fill: #facc15;
            font-size: 15px;
            font-weight: 700;
        }

        .champ-subtext {
            fill: #e5e7eb;
            font-size: 11px;
        }

        @media (max-width: 900px) {
            .grid { grid-template-columns: 1fr; }
            header { flex-direction: column; align-items: flex-start; gap: 6px; }
        }

        @media (max-width: 600px) {
            body { padding: 20px 8px 24px; }
            header h1 { font-size: 1.4rem; }
            header .subtitle { font-size: 0.85rem; }
            .card { padding: 14px 12px 14px; }
            th, td { padding: 5px 5px; font-size: 0.8rem; }
            .h2h-controls { flex-direction: column; align-items: stretch; }
            .h2h-controls select,
            .h2h-controls button { width: 100%; }
            .badge { font-size: 0.75rem; padding: 5px 10px; }
        }
    </style>
</head>
<body>
<div class="page">
    <header>
        <div>
            <h1>Fantasy League – Projected Standings</h1>
            <div class="subtitle">
                Top 3 seeds get a first-round bye. 5-team bracket, reseeds each round.
            </div>
        </div>
        <span class="badge">Week 11 Snapshot</span>
    </header>

    <div class="grid">
        <!-- LEFT: STANDINGS -->
        <div class="card">
            <div class="card-header">
                <h2>League Table</h2>
                <span class="pill">Seeds · PF · PA · Playoff %</span>
            </div>

            <div class="table-wrapper">
                <table>
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Team</th>
                        <th>Seed</th>
                        <th>Div</th>
                        <th>Record</th>
                        <th>PF</th>
                        <th>PA</th>
                        <th>PO%</th>
                        <th>Status</th>
                    </tr>
                    </thead>
                    <tbody id="standings-body"></tbody>
                </table>
            </div>

            <details class="tiebreaker-details">
                <summary> Tie-breaker & Seeding Notes (click) </summary>
                <ul class="tiebreak-list">
                    <li><strong>Division winners</strong> auto-lock top 2 seeds:
                        <em>James Teams Sucks</em> (Fish) and <em>Crip Crip</em> (Crabs), both 7–4. ESPN ordering makes James the #1 seed.
                    </li>
                    <li><strong>Dart Party</strong> (7–4) is best non-division winner → #3 seed. Seeds <strong>1–3 all get byes</strong>.</li>
                    <li><strong>Duloc InjuredBread Men- 12</strong> and <strong>HerpesDonator</strong> (6–5) are seeds #4 and #5.
                        Duloc is above Herpes based on current ESPN tiebreakers (head-to-head / PF).
                    </li>
                    <li>Everyone 5–6 and below is chasing those top 5 spots. Current order for non-playoff teams matches ESPN’s table.</li>
                </ul>
                <p class="note">
                    Playoff % estimates mirror what you see in ESPN: mid-90s for virtual locks, 50–60 for bubble teams,
                    and single digits for longshots.
                </p>
            </details>
        </div>

        <!-- RIGHT: BRACKET (LINES ONLY) + H2H -->
        <div class="side-stack">
            <!-- BRACKET -->
            <div class="card">
                <div class="card-header">
                    <h2>Projected Playoff Bracket</h2>
                    <span class="pill">Lines View · 5-Team</span>
                </div>

                <div class="bracket-svg-wrapper">
                    <svg viewBox="0 0 900 260" class="bracket-svg">
                        <!-- ROUND 1: (4) vs (5) -->
                        <text x="15"  y="40"  class="svg-team">(4) Duloc InjuredBread Men- 12</text>
                        <text x="15"  y="90"  class="svg-team">(5) HerpesDonator</text>

                        <line x1="220" y1="30" x2="320" y2="30" class="svg-line"/>
                        <line x1="220" y1="80" x2="320" y2="80" class="svg-line"/>
                        <line x1="320" y1="30" x2="320" y2="80" class="svg-line"/>
                        <line x1="320" y1="55" x2="450" y2="55" class="svg-line"/>

                        <text x="330" y="48" class="svg-label">Winner 4 vs 5</text>

                        <!-- SEMI A: #1 vs Winner 4/5 -->
                        <text x="470" y="140" class="svg-team">(1) James Teams Sucks</text>

                        <line x1="450" y1="55"  x2="450" y2="140" class="svg-line"/>
                        <line x1="450" y1="140" x2="650" y2="140" class="svg-line"/>

                        <text x="460" y="115" class="svg-label">Semi A: #1 vs Winner 4/5</text>
                        <text x="460" y="129" class="svg-label">#1 seed had first round bye</text>

                        <!-- SEMI B: #2 vs #3 -->
                        <text x="15"  y="180" class="svg-team">(2) Crip Crip</text>
                        <text x="15"  y="230" class="svg-team">(3) Dart Party</text>

                        <line x1="220" y1="170" x2="360" y2="170" class="semi-line"/>
                        <line x1="220" y1="220" x2="360" y2="220" class="semi-line"/>
                        <line x1="360" y1="170" x2="360" y2="220" class="semi-line"/>
                        <line x1="360" y1="195" x2="650" y2="195" class="semi-line"/>

                        <text x="370" y="190" class="svg-label">Semi B: (2) vs (3)</text>
                        <text x="370" y="204" class="svg-label">both were byes in Round 1</text>

                        <!-- CHAMPIONSHIP -->
                        <line x1="650" y1="140" x2="650" y2="195" class="champ-line"/>
                        <line x1="650" y1="167" x2="880" y2="167" class="champ-line"/>

                        <text x="720" y="160" class="champ-text">Championship</text>
                        <text x="720" y="180" class="champ-subtext">
                            Highest remaining vs lowest remaining seed
                        </text>
                    </svg>
                </div>

                <p class="note">
                    Round 1: only <strong>(4) Duloc</strong> vs <strong>(5) HerpesDonator</strong> play.  
                    Round 2: bracket <strong>re-seeds</strong>; lowest remaining seed plays highest (so #1 vs Winner 4/5, and #2 vs #3).  
                    Winners of Semi A and Semi B meet in the Championship.
                </p>
            </div>

            <!-- H2H -->
            <div class="card">
                <div class="card-header">
                    <h2>Head-to-Head Lookup</h2>
                    <span class="pill">From schedule.json</span>
                </div>
                <p style="font-size:0.84rem;color:#d1d5db;margin-bottom:4px;">
                    Select two teams to see their head-to-head record based on games in <code>schedule.json</code>.
                </p>
                <div class="h2h-controls">
                    <select id="teamA"></select>
                    <span style="align-self:center;font-size:0.8rem;color:#9ca3af;">vs</span>
                    <select id="teamB"></select>
                    <button type="button" onclick="showHeadToHead()">Show H2H</button>
                </div>
                <div id="h2h-result"></div>
                <div id="h2h-note">
                    Only completed games (non-null scores) are counted.  
                    Put this HTML next to <code>schedule.json</code> in your GitHub <code>/docs</code> folder.
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Standings snapshot
    const teams = [
        {
            rank: 1, seed: 1, name: "James Teams Sucks", division: 2,
            record: "7–4", pf: 1748.75, pa: 1583.20, playoffChance: 96,
            status: "Fish Champ · #1 Seed · Bye", tagType: "div"
        },
        {
            rank: 2, seed: 2, name: "Crip Crip", division: 1,
            record: "7–4", pf: 1808.50, pa: 1619.15, playoffChance: 97,
            status: "Crabs Champ · #2 Seed · Bye", tagType: "div"
        },
        {
            rank: 3, seed: 3, name: "Dart Party", division: 1,
            record: "7–4", pf: 1655.75, pa: 1655.40, playoffChance: 92,
            status: "#3 Seed · Bye", tagType: "wild"
        },
        {
            rank: 4, seed: 4, name: "Duloc InjuredBread Men- 12", division: 1,
            record: "6–5", pf: 1612.50, pa: 1643.00, playoffChance: 55,
            status: "#4 Seed · Plays #5", tagType: "wild"
        },
        {
            rank: 5, seed: 5, name: "HerpesDonator", division: 2,
            record: "6–5", pf: 1758.00, pa: 1669.10, playoffChance: 67,
            status: "#5 Seed · Plays #4", tagType: "wild"
        },
        {
            rank: 6, seed: "-", name: "Our Lard and Savior", division: 1,
            record: "5–6", pf: 1749.00, pa: 1690.85, playoffChance: 41,
            status: "Bubble", tagType: "out"
        },
        {
            rank: 7, seed: "-", name: "Josh's Scary Team", division: 1,
            record: "5–6", pf: 1682.15, pa: 1733.65, playoffChance: 33,
            status: "Bubble", tagType: "out"
        },
        {
            rank: 8, seed: "-", name: "Indoctrinated Ravens", division: 2,
            record: "5–6", pf: 1577.40, pa: 1685.80, playoffChance: 11,
            status: "Outside looking in", tagType: "out"
        },
        {
            rank: 9, seed: "-", name: "Koolaid Jammer", division: 2,
            record: "4–7", pf: 1603.80, pa: 1682.50, playoffChance: 8,
            status: "Longshot", tagType: "out"
        },
        {
            rank: 10, seed: "-", name: "Don't Blink", division: 2,
            record: "3–8", pf: 1476.10, pa: 1709.30, playoffChance: 1,
            status: "Needs miracle run", tagType: "out"
        }
    ];

    let scheduleData = [];

    async function loadSchedule() {
        try {
            const res = await fetch('schedule.json');
            if (!res.ok) throw new Error('HTTP ' + res.status);
            scheduleData = await res.json();
        } catch (err) {
            console.error('Error loading schedule.json:', err);
            const el = document.getElementById('h2h-result');
            if (el) {
                el.textContent = 'Could not load schedule.json – check that it exists next to this HTML file.';
            }
        }
    }

    function renderStandings() {
        const tbody = document.getElementById("standings-body");
        tbody.innerHTML = "";
        teams.forEach(team => {
            const tr = document.createElement("tr");
            const cells = [
                team.rank,
                team.name,
                team.seed,
                team.division,
                team.record,
                team.pf.toFixed(2),
                team.pa.toFixed(2),
                team.playoffChance + "%"
            ];
            cells.forEach((val, idx) => {
                const td = document.createElement("td");
                td.textContent = val;
                if (idx === 1) td.className = "team-name";
                tr.appendChild(td);
            });
            const statusTd = document.createElement("td");
            const span = document.createElement("span");
            span.className = "tag " + team.tagType;
            span.textContent = team.status;
            statusTd.appendChild(span);
            tr.appendChild(statusTd);
            tbody.appendChild(tr);
        });
    }

    function populateDropdowns() {
        const selectA = document.getElementById("teamA");
        const selectB = document.getElementById("teamB");
        teams.forEach(t => {
            const optA = document.createElement("option");
            optA.value = t.name;
            optA.textContent = t.name;
            selectA.appendChild(optA);

            const optB = document.createElement("option");
            optB.value = t.name;
            optB.textContent = t.name;
            selectB.appendChild(optB);
        });
        if (teams.length >= 2) {
            selectA.value = "Crip Crip";
            selectB.value = "Dart Party";
        }
    }

    function showHeadToHead() {
        const teamA = document.getElementById("teamA").value;
        const teamB = document.getElementById("teamB").value;
        const resultDiv = document.getElementById("h2h-result");

        if (!scheduleData || scheduleData.length === 0) {
            resultDiv.textContent = "Schedule data not loaded yet. Make sure schedule.json exists and reload.";
            return;
        }

        if (teamA === teamB) {
            resultDiv.textContent = "Pick two different teams to see a matchup.";
            return;
        }

        const games = scheduleData.filter(g => {
            const involves =
                (g.home === teamA && g.away === teamB) ||
                (g.home === teamB && g.away === teamA);
            const finished = g.homeScore !== null && g.awayScore !== null;
            return involves && finished;
        });

        if (games.length === 0) {
            resultDiv.textContent = `${teamA} and ${teamB} have no completed games in schedule.json.`;
            return;
        }

        let aWins = 0, aLosses = 0, aTies = 0;
        const breakdown = [];

        games.forEach(g => {
            const aIsHome = g.home === teamA;
            const aScore = aIsHome ? g.homeScore : g.awayScore;
            const bScore = aIsHome ? g.awayScore : g.homeScore;

            let outcome;
            if (aScore > bScore) {
                aWins++; outcome = `${teamA} W`;
            } else if (aScore < bScore) {
                aLosses++; outcome = `${teamA} L`;
            } else {
                aTies++; outcome = "T";
            }

            breakdown.push(
                `Week ${g.week}: ${g.away} ${g.awayScore.toFixed(2)} @ ${g.home} ${g.homeScore.toFixed(2)} – ${outcome}`
            );
        });

        const recordStr = `${teamA} vs ${teamB}: ${aWins}-${aLosses}` + (aTies ? `-${aTies}` : "");
        resultDiv.innerHTML = recordStr + "<br>" + breakdown.join("<br>");
    }

    document.addEventListener('DOMContentLoaded', () => {
        renderStandings();
        populateDropdowns();
        loadSchedule();
    });
</script>
</body>
</html>
